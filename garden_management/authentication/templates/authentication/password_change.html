{% extends "base.html" %}

{% block title %}{{ block.super }}パスワード変更{% endblock %}

{% block main %}
<div class="hero is-fullheight-with-navbar">
    <div class="container is-max-desktop">
        <section class="px-6 pt-6 pb-3">
            <h1 class="title is-3">パスワード変更フォーム</h1>
        </section>
        <!-- form -->
        <form method="POST">
            {% csrf_token %}
            <section class="px-6 pb-3">
                <p class="has-text-danger">
                    {{ form.non_field_errors }}
                </p>
            </section>
            <section class="px-6 pb-6">
                <div class="field">
                    <label for="" class="label">元のパスワード</label>
                    <div class="control has-icons-left has-icons-right">
                        {{ form.old_password }}
                        <span class="icon is-small is-left">
                            <i class="fas fa-lock"></i>
                        </span>
                        <span class="icon is-small is-right">
                            <i class="fas fa-eye-slash" id="buttonEye1" onclick="pushShowButton1()"></i>
                        </span>
                    </div>
                    <ul>
                        {% for error in form.old_password.errors %}
                        <li class="has-text-danger is-size-7">・{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="field">
                    <label for="" class="label">新しいパスワード</label>
                    <div class="control has-icons-left has-icons-right">
                        {{ form.new_password1 }}
                        <span class="icon is-small is-left">
                            <i class="fas fa-lock"></i>
                        </span>
                        <span class="icon is-small is-right">
                            <i class="fas fa-eye-slash" id="buttonEye1" onclick="pushShowButton2()"></i>
                        </span>
                    </div>
                    <ul>
                        {% for error in form.new_password1.errors %}
                        <li class="has-text-danger is-size-7">・{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="field">
                    <label for="" class="label">新しいパスワード（確認）</label>
                    <div class="control has-icons-left has-icons-right">
                        {{ form.new_password2 }}
                        <span class="icon is-small is-left">
                            <i class="fas fa-lock"></i>
                        </span>
                        <span class="icon is-small is-right">
                            <i class="fas fa-eye-slash" id="buttonEye1" onclick="pushShowButton3()"></i>
                        </span>
                    </div>
                    <ul>
                        {% for error in form.new_password2.errors %}
                        <li class="has-text-danger is-size-7">・{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
                <p class="help">
                    パスワードは8文字以上である必要があります。半角英数記号から2種類以上組み合わせてください。
                </p>
            </section>
            <section class="px-6 pb-6">
                <div class="field is-grouped">
                    <div class="control">
                        <button type="submit" class="button is-info is-outlined">
                            保存
                        </button>
                    </div>
                    <div class="control">
                        <button type="button" onclick="history.back()" class="button is-outlined">キャンセル</button>
                    </div>
                </div>
            </section>
        </form>
        <!-- END form -->
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function pushShowButton1() {
        var txtPass = document.getElementById("id_old_password");
        var btnEye = document.getElementById("buttonEye1");
        if (txtPass.type === "text") {
            txtPass.type = "password";
            btnEye.className = "fa fa-eye-slash";
        } else {
            txtPass.type = "text";
            btnEye.className = "fa fa-eye";
        }
    }
    function pushShowButton2() {
        var txtPass = document.getElementById("id_new_password1");
        var btnEye = document.getElementById("buttonEye2");
        if (txtPass.type === "text") {
            txtPass.type = "password";
            btnEye.className = "fa fa-eye-slash";
        } else {
            txtPass.type = "text";
            btnEye.className = "fa fa-eye";
        }
    }
    function pushShowButton3() {
        var txtPass = document.getElementById("id_new_password2");
        var btnEye = document.getElementById("buttonEye2");
        if (txtPass.type === "text") {
            txtPass.type = "password";
            btnEye.className = "fa fa-eye-slash";
        } else {
            txtPass.type = "text";
            btnEye.className = "fa fa-eye";
        }
    }
</script>
{% endblock %}