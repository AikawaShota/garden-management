{% extends 'base.html' %}

{% block content %}

        <div class="columns m-0">
            <div class="login-image column">
                <div class="login-image-text">
                    <h1 class="title has-text-light has-text-centered is-3">備品管理をシンプルに。</h1>
                    <p class="sub-title has-text-centered has-text-light is-size-6">
                        "KOKUA備品管理" は、煩雑になりがちな備品の貸出管理や<br class="br-pc">
                        在庫管理を快適にできるWEBアプリケーションです。
                    </p>
                </div>
            </div>
            <div class="login-form column">
                <section class="px-6 pt-6 pb-6">
                    <h1 class="title is-3">KOKUA備品管理</h1>
                </section>
                <section class="px-6 pt-6 pb-3">
                    <h1 class="title is-4">ログイン</h1>
                    {% if form.errors %}
                    <p class="has-text-danger is-size-6">登録されているメールアドレスとパスワードが一致しませんでした。再度ご入力お願いいたします。</p>
                    {% endif %}

                    {% if next %}
                    {% if user.is_authenticated %}
                    <p class="has-text-danger is-size-6">このアカウントの持つ権限ではこのページにアクセスできません。</p>
                    {% else %}
                    <p class="has-text-danger is-size-6">このページにアクセスするにはログインが必要です。</p>
                    {% endif %}
                    {% endif %}

                </section>

                <form method="post" action="{% url 'authentication:login' %}">
                    {% csrf_token %}
                    <section class="px-6 pb-6">
                        <div class="field mb-5">
                            <label for="" class="label">メールアドレス</label>
                            <div class="control has-icons-left">
                                {{ form.username }}
                                <span class="icon is-small is-left">
                                    <i class="fas fa-envelope"></i>
                                </span>
                            </div>
                        </div>

                        <div class="field">
                            <label for="" class="label">パスワード</label>
                            <div class="control has-icons-left has-icons-right">
                                {{ form.password }}
                                <span class="icon is-small is-left">
                                    <i class="fas fa-lock"></i>
                                </span>
                                <span class="icon is-small is-right">
                                    <i class="fas fa-eye-slash" id="buttonEye" onclick="pushShowButton()"></i>
                                </span>
                            </div>
                        </div>

                        <section class="pt-4">
                            <div class="field">
                                <div class="control">
                                    <button type="submit" class="button is-info is-outlined is-fullwidth">ログイン</button>
                                </div>
                            </div>
                            <input type="hidden" name="next" value="{{ next }}">
                        </section>
                </form>
                <!-- パスワードリセット機能を実装した際にhtmlのコメントとpythonのコメント（#）を外す。 -->
                <!-- <p><a href="{# % url 'password_reset' %}">Lost password?</a></p> -->
            </div>
        </div>

{% endblock %}
{% block scripts %}
    function pushShowButton() {
        var txtPass = document.getElementById("id_password");
        var btnEye = document.getElementById("buttonEye");
        if (txtPass.type === "text") {
            txtPass.type = "password";
            btnEye.className = "fas fa-eye-slash";
        } else {
            txtPass.type = "text";
            btnEye.className = "fas fa-eye";
        }
    }
{% endblock %}
